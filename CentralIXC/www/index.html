<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Central do Assinante</title>
    <link rel="icon" href="/assets/ico.png" type="image/png">
    <style>
        /* Reset básico */
        body {
            font-family: "Arial", Helvetica, sans-serif;
            padding: 0;
            box-sizing: border-box;
            height: auto;
            margin: 0;            
            background-color: #10107A;
        }
       
        /* Container principal */
        .container-atm {
                display: flex; /* Organiza as divs lado a lado */
                flex-wrap: wrap;
                justify-content: center; /* Centraliza horizontalmente */
                align-items: center; /* Alinha verticalmente ao centro */
                padding: 20px;
                gap: 20px;
                margin-top: 20px;
                max-width: 100%;
                height: 100vh; /* Ajuste a altura conforme necessário */
            }

            
            
        .auto-atendimento {
            display: none; /* Oculta a div auto-atendimento inicialmente */
            color: #ffffff;
            flex-wrap: wrap;
            justify-content: flex-start;
            max-width: 60%;
            width: 650px;
            gap: 20px;
            border-radius: 8px;
            text-align: center;
        }
    
        .auto-atendimento h1 {
            font-size: 20px;    
            text-align: center;
            display: flex;
            justify-content: center;
        }
    
        .auto-atendimento img {
            max-width: 100px;
            height: auto;
            margin: 5px;
            background-color: #0056b3;
            border-radius: 8px;
            padding: 25px 25px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .auto-atendimento img:hover {
            transform: scale(1.1);
        }
    
        .auto-atendimento button {
            background: none;
            border: none;
            padding: 0;
            cursor: pointer;
            margin: 5px;
            transition: transform 0.3s ease, background-color 0.3s ease;
        }
    
        .auto-atendimento button img {
            display: block;
            width: 150px; /* Altere conforme necessário */
            height: auto; /* Mantém a proporção da imagem */
            transition: transform 0.3s ease;
            margin: 0 auto; /* Centraliza as imagens dentro dos botões */
            transition: transform 0.3s ease, background-color 0.3s ease;
        }
    
        .auto-atendimento button:hover img {
            transform: scale(1.1);
        }
    
        #formContainer, #ossformContainer {
position: relative;
color: #fff;
background-color: #10107A;
border-radius: 8px;
text-align: center;
padding: 50px;
max-width: 40%;
width: 250px;
}

#formContainer img, #ossformContainer img {
width: 100%;
}

#formContainer h3, #ossformContainer h3 {
font-size: x-small;
}

#formContainer h1, #ossformContainer h1 {
font-size: 25px;
}

.inputUser {
background: none;
border: none;
border-bottom: 1px solid white;
outline: none;
color: white;
font-size: 15px;
width: 100%;
letter-spacing: 2px;
}

.inputBox {
position: relative;
}

.labelinput {
position: absolute;
font-size: 12px;
top: 0px;
left: 0px;
pointer-events: none;
transition: .5s;
}

.logoutbutton button {
transition: transform 0.3s ease, background-color 0.3s ease;
}

.retorno-site button {
background: white;
width: 100px;
border: none;
padding: 10px;
color: white;
font-size: 12px;
cursor: pointer;
border-radius: 5px;
text-decoration: none;
transition: transform 0.3s ease, background-color 0.3s ease;  
}

.inputUser:focus ~ .labelinput,
.inputUser:valid ~ .labelinput {
top: -20px;
font-size: 12px;
color: dodgerblue;
}

.ul {
list-style-type: none; 
}

.formContainer button, #ossFormContainer button {
background-color: #0056b3;
width: 100%;
border: none;
padding: 10px;
color: white;
font-size: 12px;
cursor: pointer;
border-radius: 5px;
transition: transform 0.3s ease, background-color 0.3s ease;
}

.formContainer button:hover, #ossFormContainer button:hover {
background-color: #0056b3;
transform: scale(1.1);
}   

#ossFormContainer {
padding: 20px;
max-width: 300px; /* Ajuste o tamanho conforme necessário */
}

#ossFormContainer label {
display: block;
font-size: 12px;
color: white;
margin-bottom: 8px;
}

#ossFormContainer select,
#ossFormContainer textarea {
background: none;
border: 1px solid #10107A;
border-radius: 4px;
outline: none;
color: white;
font-size: 15px;
width: calc(100% - 20px);
margin-bottom: 20px;
padding: 10px;
}

.placeholder {
color: white;
}

#ossFormContainer select {
height: 40px;
}

#ossFormContainer textarea {
height: 100px;
resize: vertical;
}

    
        /* Estilos do Modal */
        .modal {
            display: none; /* Oculta o modal inicialmente */
            position: fixed;
            z-index: 1000;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 600px;
            width: 100%;
            overflow: auto;
            justify-content: center;
            align-items: center;
            height: 80%;
        }
        
        .modal-content {
            background-color: #10107A;
            color: #fff;
            margin: auto;
            font-size: 30px;
            padding: 20px;
            border: none;
            border-radius: 10px;
            width: 80%;
            max-width: 600px;
        }

        .close h3 {
            background-color: #ffffff;
            border-radius: 5px;
            color: #10107A;
            width: 70px;
            padding: 8px;
            text-align: right;
            margin: 0;
        }

        .close {
            
            font-size: 13px;
            font-weight: bold;
            transition: transform 0.3s ease;
        }

        .close:hover,
        .close:focus {
            color: #ffffff;
            transform: scale(1.1);
            text-decoration: none;
            cursor: pointer;
        }

        .textoModal {
            font-size: 12px;
            line-height: 1.5;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            list-style-type: none;
        }


.textoProfile {
width: 100%;
text-align: center;
}

.textoProfile h1 {
font-size: 24px;
font-weight: bold;
color: #fff;
}

.textoProfile p span {
font-weight: bold;
color: #fff;
}

.textoProfile p::before {
color: #fff;
font-weight: bold;
}

        .textoModal span {
            font-size: 18px;
            display: inline; /* Garante que o span não quebre a linha */
            background-color: #0056b3;
            width: auto; /* Ajusta a largura do span para o conteúdo */
            border-radius: 5px;
        }

        .textoModal h4 {
            font-size: 14px;
            margin: 0; /* Remove a margem padrão do h4 */
            padding: 0; /* Remove o preenchimento padrão do h4 */
        }

        .textoModal a {
            display: inline; /* Garante que o link não quebre a linha */
        }

        li {
            border: none; /* Remove a borda dos itens da lista */
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 10px;
        }

        ul {
            list-style-type: none; /* Remove os pontos dos itens da lista */
            padding: 0; /* Remove o padding padrão do <ul> */
            margin: 0; /* Remove a margem padrão do <ul> */
        }

        /* Estilos gerais para os itens de boletos */
        .textoModalBoletos {
    padding: 20px;
    margin-bottom: 20px;
    border: 1px solid #10107A;
    border-radius: 5px;
    background-color: #e8e7e7;
    font-size: 15px;
    text-align: center;
    color:#10107A
}

.boleto-info {
    display: flex;
    justify-content: space-between;
    margin-bottom: 15px;
}

.info-col {
    flex: 1;
    margin-right: 15px;
}

.info-col p {
    margin: 0;
}

.boleto-status {
    margin-bottom: 10px; /* Reduzido o espaçamento entre situação e resultado */
}

.boleto-pix-linha {
    display: flex;
    justify-content: space-between;
    margin-bottom: 15px;
}

.boleto-pix, .boleto-linha {
    flex: 1;
    margin-right: 15px;
}

.boleto-pix p, .boleto-linha p {
    margin: 0;
}

.btn-boleto {
    display: inline-block;
    background-color: #246ECC;
    color: #fff;
    padding: 10px;
    border-radius: 8px;
    text-decoration: none;
    transition: transform 0.3s ease, background-color 0.3s ease;
}

.btn-boleto:hover {
    background-color: #1e5bb4;
    transform: scale(1.1);
}


        /* Remove o sublinhado do link e aplica o estilo desejado */
.btn-boleto {
    background-color: #246ECC;
    color: #fff;
    padding: 10px;
    border-radius: 8px;
    text-decoration: none; /* Remove o sublinhado */
    display: inline-block; /* Permite aplicar padding e margens */
    transition: transform 0.3s ease, background-color 0.3s ease;
}

/* Efeito ao passar o mouse */
.btn-boleto:hover {
    transform: scale(1.02); /* Aumenta levemente o botão */
    background-color: #1B5AA8; /* Altera a cor de fundo */
}


         /* Estilos gerais para os itens de Outros */
         

        .textoModalOutros h2 {
            font-size: 20px;
        }

        #ossForm {
            position: relative;
            color: #fff;
            background-color: #10107A;
            border-radius: 5px;
            text-align: center;
            padding: 30px;
            max-width: 100%;
            margin: auto;
        }

        #ossForm label {
            display: block;
            font-size: 12px;
            color: white;
            margin-bottom: 8px;
        }

        #ossForm select,
        #ossForm textarea {
            background: none;
            border-radius: 10px;
            outline: none;
            color: white;
            background-color: #0056b3;
            font-size: 15px;
            width: calc(100% - 20px);
            margin-bottom: 20px;
            padding: 10px;
        }

        #ossForm select {
            height: 50px;
            
        }

        #ossForm textarea {
            height: 100px;
            resize: vertical;
        }

        #ossForm button {
            background-color: #0056b3;
            width: 100%;
            border: none;
            padding: 10px;
            color: white;
            font-size: 12px;
            cursor: pointer;
            border-radius: 5px;
            transition: transform 0.3s ease, background-color 0.3s ease;
        }

        #ossForm button:hover {
            background-color: #0056b3;
            transform: scale(1.1);
        }

        @media (max-width: 768px) {
        /* Ajustes para telas menores */
        #ossformContainer {
            max-width: 50%; /* Reduz a largura máxima */
            width: auto; /* Ajusta a largura para ocupar o máximo permitido */
            padding: 15px; /* Reduz o padding para economizar espaço */
            border-radius: 20px;
            font-size: 20px;
        }

        #formContainer img {
            max-width: 240px;
            width: 100%; /* Ajusta a largura para ocupar o máximo permitido */
            padding: 15px; /* Reduz o padding para economizar espaço */
            border-radius: 20px;
            font-size: 20px;
        }

        #formContainer {
            max-width: 270px;
            width: 100%; /* Ajusta a largura para ocupar o máximo permitido */
            padding: 20px; /* Reduz o padding para economizar espaço */
            border-radius: 20px;
            font-size: 15px;
            height: auto;
        }

        .auto-atendimento {
            max-width: 100%; /* Reduz a largura máxima */
            width: 100%; /* Ajusta a largura para ocupar o máximo permitido */
            /* Reduz o padding para economizar espaço */
        }

        

        .textoProfile {
            max-width: 300px;
            width: 100%;
            height: auto;
            text-align: center;
            font-size: 15px;
            margin-top: -50px;
        }
        .textoProfile h1 {
            font-size: 10px;
        }
    }

    /* Botão UP Flutuante */
.up-button {
position: fixed;
bottom: 20px;
right: 20px;
width: 60px;
height: 60px;
background-color: #0056b3; /* Cor de fundo */
border-radius: 50%;
box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
cursor: pointer;
z-index: 1;
display: flex;
align-items: center;
justify-content: center;
transition: background-color 0.3s;
}
.up-button img {
width: 30px;
height: 30px;
opacity: 50%;
}
.up-button:hover {
transform: scale(1.1);
opacity: 100%;
}
.up-button img:hover {
opacity: 100%;
}

.background-dinamico {
    position: absolute;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: -1; /* Fica atrás de outros elementos */
}

.elemento {
    position: absolute;
    width: 150px;
    height: 150px;
    opacity: 0.8;
    animation: moverElementos 10s infinite linear;
}

.elemento:nth-child(1) {
    top: 10%;
    left: 20%;
    animation-delay: 0s;
}

.elemento:nth-child(2) {
    top: 30%;
    left: 60%;
    animation-delay: 2s;
}

.elemento:nth-child(3) {
    top: 70%;
    left: 40%;
    animation-delay: 4s;
}

.elemento:nth-child(4) {
    top: 50%;
    left: 70%;
    animation-delay: 6s;
}

.elemento:nth-child(5) {
    top: 20%;
    left: 80%;
    animation-delay: 8s;
}

.elemento:nth-child(6) {
    top: 80%;
    left: 10%;
    animation-delay: 10s;
}

@keyframes moverElementos {
    0% {
        transform: translateY(0) rotate(0deg) scale(1);
    }
    50% {
        transform: translateY(-20px) rotate(180deg) scale(1.1);
    }
    100% {
        transform: translateY(0) rotate(360deg) scale(1);
    }
}

.textoModalOutros {
    padding: 20px;
    margin-bottom: 20px;
    border: 1px solid #10107A; /* Cor da borda igual ao estilo de boletos */
    border-radius: 5px;
    background-color: #e8e7e7; /* Cor de fundo igual ao estilo de boletos */
    font-size: 15px; /* Tamanho da fonte igual ao estilo de boletos */
    text-align: center; /* Alinhamento do texto igual ao estilo de boletos */
    color: #10107A; /* Cor do texto igual ao estilo de boletos */
}

.cliente-titulo {
    font-size: 24px; /* Tamanho da fonte */
    color: #10107A; /* Cor do texto */
    margin-bottom: 15px; /* Espaçamento abaixo do título */
}

.cliente-info {
    font-size: 16px; /* Tamanho da fonte */
    color: #10107A; /* Cor do texto */
}

.info-label {
    font-weight: bold; /* Negrito para rótulos */
    color: #10107A; /* Cor do texto dos rótulos */
}

.textoModalOutros {
    background-color: #f9f9f9; /* Cor de fundo leve */
    padding: 20px; /* Espaçamento interno */
    border-radius: 10px; /* Bordas arredondadas */
    border: 1px solid #ddd; /* Borda suave */
    max-width: 500px; /* Largura máxima */
    margin: auto; /* Centraliza horizontalmente */
}

.cliente-titulo {
    font-size: 24px; /* Tamanho da fonte */
    color: #10107A; /* Cor do texto */
    margin-bottom: 15px; /* Espaçamento abaixo do título */
}

.cliente-info {
    font-size: 16px; /* Tamanho da fonte */
    color: #10107A; /* Cor do texto */
}

.info-item {
    margin-bottom: 10px; /* Espaçamento entre itens */
}

.info-item strong {
    display: block; /* Faz o rótulo aparecer em linha própria */
    color: #000; /* Cor do texto dos rótulos */
    font-weight: bold; /* Negrito para rótulos */
}

.info-value {
    background-color: #bbb; /* Cor de fundo para valores */
    font-size: 17px; /* Tamanho da fonte */
    font-weight: bold; /* Negrito para valores */
    padding: 10px; /* Espaçamento interno */
    border-radius: 5px; /* Bordas arredondadas */
}

/* Estilos específicos para o conteúdo do extrato */
.textoModalExtrato {
    margin: 15px;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
    background-color: #f9f9f9;
}

.consumo-total {
    margin-bottom: 10px;
}

.consumo-total p {
    font-size: 16px;
}

.detalhes-consumo {
    margin-bottom: 10px;
}

.detalhes-consumo strong {
    display: block;
    margin-bottom: 5px;
    font-size: 18px;
}

.item-consumo {
    margin-bottom: 5px;
    padding: 5px;
    border-bottom: 1px solid #ddd;
}

.item-consumo:last-child {
    border-bottom: none;
}

.info-value {
    color: #333;
    font-weight: bold;
}

.faq-prov {
    background-color: #0056b3;
    padding: 20px;
    color: #1515A3;
    max-width: 60%;
    width: 410px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    border-radius: 10px;
}

/* Estilos para o fundo e contêiner da FAQ */
.faq-background {
    background-color: #F1D213;  
    padding: 20px;
    border-radius: 10px;
    max-width: 700px;
    margin: 0 auto;
}

.FAQ {
    background-color: #F1D213;
    padding: 20px;
    color: #10107A; /* Cor dos textos, similar ao estilo fornecido */
    border-radius: 10px;
    font-size: 15px;
}

.FAQ h2 {
    font-size: 20px; /* Ajustado para uma melhor visibilidade */
    color: #10107A;
    text-align: center;
}

.faq-container {
    display: flex;
    flex-direction: column;
    gap: 10px;
    width: 100%;
}

.faq-item {
    background-color: #ffffff;
    border-radius: 5px;
    padding: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Adicionando sombra para definição */
    margin-bottom: 10px;
}

.faq-question {
    font-weight: bold;
    cursor: pointer;
    padding: 10px;
    background-color: #e0c20b; /* Cor de fundo das perguntas */
    border-radius: 5px;
    color: #10107A; /* Cor do texto das perguntas */
    transition: background-color 0.3s ease, transform 0.3s ease;
}

.faq-question:hover {
    background-color: #f4b731; /* Cor de fundo ao passar o mouse */
    transform: scale(1.05);
}

.faq-answer {
    display: none;
    padding: 10px;
    background-color: #ffffff;
    border-radius: 5px;
    color: #10107A;
}

.faq-item.active .faq-answer {
    display: block;
}

h3 {
    color: #10107A; /* Cor do texto para o título final */
    text-align: center;
}


#duvidasContent {
    width: 100%;
}
    </style> 
</head>
<body>
    <div class="container-atm" id="container-atm">
        <div class="formContainer" id="formContainer">
            <img src="/assets/logo_app_.png" alt="Logotipo">
            <form id="cpfForm">
                <br>
                <h1 style="font-style: italic; font-size: 15px;">Central do Assinante</h1>
                <br>
                <div class="inputBox">
                    <input type="text" id="cpf" name="cpf" class="inputUser" required>
                    <label for="cpf" class="labelinput" style="text-align: center;">Faça login com o seu CPF ou CNPJ:</label>
                </div>
                <br>
                <br>
                <!--<input type="text" id="pass" name="pass" placeholder="******" required>-->
                <button type="submit">Entrar na central</button>
                <br><br>
                <a href="form.html" class="retorno-site">
                    <button type="button" style="background-color: #0056b3; font-weight: bold;">Não sou cliente</button>
                </a>
                <br><br>
                <a href="planos.html" class="retorno-site">
                    <button type="button" style="background-color: #1ea30d; font-size: 20px; font-weight: bold;">Ver planos e ofertas</button>
                </a>
            </form>
            <br><br><br>
            <div id="result">
                <!-- O resultado da busca será exibido aqui -->
            </div>
        </div>

        <div class="auto-atendimento" id="auto-atendimento">          
            <div id="bemVindo">                
                <h1>Serviços disponíveis para você.</h1>
                <br>
                <button data-page="Contrato">
                    <img src="/assets/a_contrato_.png" alt="Contrato">
                </button>
                
                <button data-page="Boleto">
                    <img src="/assets/a_boleto_.png" alt="Boleto">
                </button>

                <button data-page="desbloqueio">
                    <img src="/assets/a_desbloqueio_.png" alt="desbloqueio">
                </button>

                <button data-page="Oss">
                    <img src="/assets/a_suporte_.png" alt="Oss">
                </button>

                <button data-page="criarOss">
                    <img src="/assets/a_cadastro_.png" alt="criarOss">
                </button>

                <button data-page="extratoConexao">
                    <img src="/assets/a_extrato_.png" alt="extrato">
                </button>

                <!-- FAQ Section -->
            <div class="faq-prov">
                <button data-page="faq-prov">
                    <img src="/assets/a_faq_.png" alt="duvidas">
                </button>
            </div>
            </div>
        </div>

        <!-- Modal -->
        <div id="myModal" class="modal">
            <div class="modal-content">
                <span class="close"><h3>Fechar &times;</h3></span>
                <br>
                
                <div id="boletoContent">
                    <!-- O conteúdo do boleto será exibido aqui -->                      
                </div>

                <div id="pixContent">
                    <!-- O conteúdo do boleto será exibido aqui -->                      
                </div> 
        
                <div id="contratoContent">
                    <!-- O conteúdo do contrato será exibido aqui -->
                </div>
        
                <div id="ossContent">
                    <!-- O conteúdo de OSS será exibido aqui -->
                </div>
        
                <div id="criarOssContent">
                    <!-- O conteúdo de criar OSS será exibido aqui -->
                </div>
                
                <div id="desbloqueioContent">
                    <!-- O conteúdo de desbloqueio será exibido aqui -->
                </div>

                <div id="reiniciarContent">
                    <!-- O conteúdo de desbloqueio será exibido aqui -->
                </div>

                <div id="statusContent">
                    <!-- O conteúdo de desbloqueio será exibido aqui -->
                </div>

                <div id="extratoContent">
                    <!-- O conteúdo de extrato será exibido aqui -->
                </div>

                <div id="duvidasContent">
                    <!-- O conteúdo de extrato será exibido aqui -->
                </div>
                
            </div>
        </div>

        <div id="ossFormContainer" style="display: none;">
            <form id="ossForm">
                <div>
                    <label for="assunto">Primeiro, selecione um assunto:</label>
                    <select id="assunto" name="assunto" required>
                        <option value="8">Suporte técnico</option>
                        <option value="6">Financeiro</option>
                    </select>
                </div>
        
                <div>
                    <label for="mensagem">Como podemos te ajudar?</label>
                    <textarea id="mensagem" name="mensagem" placeholder="Descreva como podemos te ajudar" required></textarea>
                </div>
        
                <!-- Campos ocultos -->
                <input type="hidden" id="id_filial" name="id_filial" value="1" />
                <input type="hidden" id="origem_endereco" name="origem_endereco" value="M" />
                <input type="hidden" id="status" name="status" value="A" />
                <input type="hidden" id="prioridade" name="prioridade" value="1" />
                <input type="hidden" id="setor" name="setor" value="1" />
                <input type="hidden" id="tipo" name="tipo" value="C" />
        
                <button type="submit">Abrir novo chamado</button>
            </form>
        </div>

        <div class="background-dinamico">
            <svg class="elemento" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="40" fill="#0056b3"></circle>
            </svg>
            <svg class="elemento" viewBox="0 0 100 100">
                <rect x="10" y="10" width="80" height="80" fill="#10107A"></rect>
            </svg>
            <svg class="elemento" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="40" fill="orange"></circle>
            </svg>
            <svg class="elemento" viewBox="0 0 100 100">
                <polygon points="50,15 60,85 40,85" fill="#F1D213"></polygon>
            </svg>
            <svg class="elemento" viewBox="0 0 100 100">
                <rect x="10" y="45" width="80" height="10" fill="#1515A3"></rect>
                <rect x="45" y="10" width="10" height="80" fill="#1515A3"></rect>
            </svg>
            <svg class="elemento" viewBox="0 0 100 100">
                <polygon points="30,10 70,10 50,90" fill="#008FFD"></polygon>
            </svg>
        </div>
    </div>
    
    <script>

document.addEventListener('DOMContentLoaded', () => {
    const buttons = document.querySelectorAll('.auto-atendimento button');
    const modal = document.getElementById('myModal');
    const span = document.querySelector('.close');
    const autoAtendimento = document.getElementById('auto-atendimento');
    const cpfForm = document.getElementById("cpfForm");
    const cpfInput = document.getElementById("cpf");

    // Mapear botões para funções correspondentes
    const buttonActions = {
        'desbloqueio': desbloqueioConfianca,
        'criarOss': criarOss,
        'contrato': carregarContrato,
        'Boleto': carregarBoleto,
        'Oss': buscarChamado,
        'faq-prov': duvidas,
        'extratoConexao': extratoConexao
    };

     // Função para limpar o modal
     function limparModal() {
        document.getElementById('contratoContent').innerHTML = '';
        document.getElementById('boletoContent').innerHTML = '';
        document.getElementById('pixContent').innerHTML = '';
        document.getElementById('ossContent').innerHTML = '';
        document.getElementById('criarOssContent').innerHTML = '';
        document.getElementById('reiniciarContent').innerHTML = '';
        document.getElementById('desbloqueioContent').innerHTML = '';
        document.getElementById('duvidasContent').innerHTML = '';
        document.getElementById('extratoContent').innerHTML = '';
    }

    // Fechar modal quando clicado no "x"
    if (span) {
        span.addEventListener('click', () => {
            modal.style.display = 'none';
            limparModal();
        });
    }

    // Fechar modal ao clicar fora dele
    window.addEventListener('click', (event) => {
        if (event.target === modal) {
            modal.style.display = 'none';
            limparModal();
        }
    });

    // Atribuir eventos de clique aos botões
    buttons.forEach(button => {
        button.addEventListener('click', () => {
            const action = button.getAttribute('data-page');
            if (buttonActions[action]) {
                buttonActions[action]();
            }
        });
    });

    // Função para formatar o CPF
    function formatarCPF(cpf) {
        const cpfNumeros = cpf.replace(/\D/g, ''); // Remove qualquer caractere que não seja número
        return cpfNumeros.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
    }

    // Função para formatar e definir o CPF no campo de entrada
    function formatarInputCPF(event) {
        const cpf = event.target.value;
        event.target.value = formatarCPF(cpf);
    }

    // Adicionar evento input ao campo CPF
    if (cpfInput) {
        cpfInput.addEventListener('input', formatarInputCPF);
    }

    // Função para buscar dados do cliente e validar login
    async function buscarClientes(cpf, senha) {
    try {
        const cpfSemFormatacao = cpf.replace(/\D/g, ''); // CPF sem formatação
        const cpfFormatado = formatarCPF(cpf); // CPF formatado para exibição

        // Armazenar CPF formatado e CPF sem formatação no localStorage
        localStorage.setItem('cpfFormatado', cpfFormatado);
        localStorage.setItem('cpfSemFormatacao', cpfSemFormatacao);
        localStorage.setItem('senha', cpfSemFormatacao); // Senha é o CPF sem formatação

        console.log("Fazendo requisição para o servidor proxy...");

        const response = await fetch('https://feitosa-github-io.vercel.app/api/proxy/contratos', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                cpfcnpj: cpfSemFormatacao,
                senha: senha
            })
        });

        if (!response.ok) {
            throw new Error("Erro na requisição");
        }

        const data = await response.json();

        // Verificar a autenticação e mostrar a div auto-atendimento
        if (data.auth) {
            autoAtendimento.style.display = 'flex'; // Exibe a div auto-atendimento
            cpfForm.style.display = 'none'; // Oculta o formulário
            exibirResultado(data.contratos[0]); // Passa o primeiro contrato para exibirResultado
        } else {
            exibirResultado(null); // Exibe mensagem de erro
        }
    } catch (error) {
        console.error("Erro ao buscar clientes:", error.message);
        exibirErro("Erro ao buscar cliente.");
    }
}

    // Função para exibir o resultado da busca
function exibirResultado(cliente) {
    const resultDiv = document.getElementById("result");

    if (cliente) {
        // Armazenar o ID do contrato no localStorage
        localStorage.setItem('contratoId', cliente.contrato); // Armazenando o ID do contrato

        resultDiv.innerHTML = `<div class="textoProfile">
            <h1 style="text-align: center;">Boas vindas,<br><p>${cliente.razaosocial}!</p></h1>
            </div>
        <div class="logoutbutton">
            <button id="logoutButton">Fazer logout</button>
        </div>`;

        // Adiciona o manipulador de evento ao botão de logout
        document.getElementById("logoutButton").addEventListener("click", () => {
            // Limpar localStorage e redirecionar para a tela de login
            localStorage.removeItem('cpfFormatado');
            localStorage.removeItem('cpfSemFormatacao');
            localStorage.removeItem('senha');
            localStorage.removeItem('contratoId'); // Limpar o ID do contrato também
            window.location.href = "index.html";
        });
    } else {
        resultDiv.innerHTML = "<p>Cliente não encontrado.</p>";
        autoAtendimento.style.display = 'none';
    }
}
    // Função para exibir mensagens de erro
    function exibirErro(mensagem) {
        const resultDiv = document.getElementById("result");
        resultDiv.innerHTML = `<p style="color: red;">${mensagem}</p>`;
        autoAtendimento.style.display = 'none';
    }

    // Adiciona o listener ao formulário
    if (cpfForm) {
        cpfForm.addEventListener("submit", function(event) {
            event.preventDefault();
            const cpf = document.getElementById("cpf").value; // Obtém o valor do CPF com formatação
            const senha = cpf.replace(/\D/g, ''); // Senha é o CPF sem formatação

            if (cpf && senha) {
                buscarClientes(cpf, senha);
            } else {
                exibirErro("CPF ou senha não fornecidos.");
            }
        });
    }

    // Adiciona o listener aos botões do auto-atendimento
    buttons.forEach(button => {
        button.addEventListener('click', async () => {
            const page = button.getAttribute('data-page');
            modal.style.display = "block";

            if (page === 'Contrato') {
                await carregarContrato();
            } else if (page === 'Boleto') {
                await carregarBoleto();
            } else if (page === 'pix-pag') {
                await carregarPix();
            } else if (page === 'desbloqueio') {
                await desbloqueioConfianca();
            } else if (page === 'Oss') {
                await buscarChamado();
            } else if (page === 'criarOss') {
                await criarOss();
            } else if (page === 'reiniciar') {
                await reiniciarConexao();
            } else if (page === 'duvidas') {
                await duvidas();
            } else if (page === 'extratoConexao') {
                await extratoConexao();
            }
        });
    });

// Função para mostrar o conteúdo do contrato no modal
function mostrarContrato() {
    // Supondo que os dados do cliente sejam armazenados em uma variável após o login
    const cliente = {
        razaosocial: 'ANTONIO JOSE SILVA PINTO',
        endereco_instalacao: {
            logradouro: 'Rua Exemplo',
            numero: '123',
            bairro: 'Bairro Exemplo',
            cidade: 'Cidade Exemplo',
            uf: 'UF',
            cep: '00000-000'
        },
        planointernet: '250 Megas + Telemedicina',
        planotv: 'Plano Teste Tv NXPLAY',
        planointernet_valor: 119.00
    };

    // Cria o conteúdo HTML dinamicamente usando os valores reais da variável 'cliente'
    const contratoContent = `<div class="textoModalOutros">
    <div class="cliente-info">
        <p class="info-item">
            <strong style="color: #10107A;">Plano de Internet:</strong><br>
            <span class="info-value">${cliente.planointernet}</span>
        </p>
        <p class="info-item">
            <strong style="color: #10107A;">Plano de TV:</strong><br>
            <span class="info-value">${cliente.planotv}</span>
        </p>
        <p class="info-item">
            <strong style="color: #10107A;">Mensalidade:</strong><br>
            <span class="info-value">R$ ${cliente.planointernet_valor.toFixed(2)}</span>
        </p>
    </div>
</div>

    `;

    // Insere o conteúdo na div contratoContent dentro do modal
    document.getElementById('contratoContent').innerHTML = contratoContent;

    // Exibe o modal
    const modal = document.getElementById('myModal');
    modal.style.display = 'block';
}

// Adiciona o evento de clique ao botão para mostrar o contrato
document.querySelector('button[data-page="Contrato"]').addEventListener('click', mostrarContrato);

// Fecha o modal quando o botão de fechar é clicado
document.querySelector('.modal .close').addEventListener('click', function() {
    document.getElementById('myModal').style.display = 'none';
});

// Função para exibir seção de dúvidas
function duvidas() {
    // Conteúdo de FAQ
    const faqContent = `
    <div class="faq-background" id="faq-background">
        <div class="FAQ" id="FAQ">
            <h2>Dúvidas Frequentes (FAQ)</h2>
            <br><br>
            <div class="faq-container">
                <div class="faq-item">
                    <div class="faq-question">Como posso solicitar a instalação do serviço?</div>
                    <div class="faq-answer">Basta entrar em contato conosco através de nossos canais de atendimento. A instalação é gratuita e será agendada para a data mais conveniente para você.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">A cobertura do serviço está disponível na minha área?</div>
                    <div class="faq-answer">Oferecemos cobertura em diversas regiões. Para verificar se o serviço está disponível na sua área, entre em contato com nossa equipe ou consulte o mapa de cobertura em nosso site.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">O suporte técnico é gratuito?</div>
                    <div class="faq-answer">Sim, oferecemos suporte técnico gratuito para todos os nossos clientes. Nossa equipe está disponível 24 horas por dia para ajudar a resolver quaisquer problemas.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">Estou sem conexão, o que posso fazer?</div>
                    <div class="faq-answer">
                        Se você estiver sem conexão, siga os passos abaixo:
                        <ul><br>
                            <p><b>1.</b> Verifique se todos os cabos estão conectados corretamente.</p><br>
                            <p><b>2.</b> Reinicie seu roteador desligando-o por 10 segundos e ligando-o novamente.</p><br>
                            <p><b>3.</b> Certifique-se de que sua conta está em dia.</p><br>
                            <p><b>4.</b> Se o problema persistir, entre em contato com nosso suporte técnico.</p>
                        </ul>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">Como posso melhorar a qualidade da minha conexão?</div>
                    <div class="faq-answer">
                        Para melhorar a qualidade da conexão, siga estas dicas:
                        <ul><br>
                            <p><b>1.</b> Posicione o roteador em uma área central da casa, longe de obstáculos.</p><br>
                            <p><b>2.</b> Evite o uso de micro-ondas e telefones sem fio próximos ao roteador.</p><br>
                            <p><b>3.</b> Verifique se o firmware do roteador está atualizado.</p><br>
                            <p><b>4.</b> Limite o número de dispositivos conectados simultaneamente.</p>
                        </ul>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">Posso mudar de plano após a instalação?</div>
                    <div class="faq-answer">Sim, você pode mudar de plano a qualquer momento. Basta entrar em contato com nossa equipe para fazer a alteração desejada.</div>
                </div>
            </div>
            <br><br>
            <h3>Se ainda precisar de ajuda, fale com nosso time.</h3>
        </div>
    </div>`;

    // Insere o conteúdo de FAQ no modal
    document.getElementById('duvidasContent').innerHTML = faqContent;

    // Exibe o modal
    const modal = document.getElementById('myModal');
    modal.style.display = 'block';

    // Adiciona comportamento para alternar a visibilidade das respostas
    const faqQuestions = document.querySelectorAll('.faq-question');
    faqQuestions.forEach(question => {
        question.addEventListener('click', function () {
            // Fecha todas as respostas
            const allAnswers = document.querySelectorAll('.faq-answer');
            allAnswers.forEach(answer => {
                answer.style.display = 'none';
            });

            // Remove classe 'active' de todos os itens
            const allItems = document.querySelectorAll('.faq-item');
            allItems.forEach(item => {
                item.classList.remove('active');
            });

            // Alterna a exibição da resposta correspondente
            const parentItem = this.parentElement;
            const answer = parentItem.querySelector('.faq-answer');

            // Exibe a resposta da pergunta clicada
            if (answer.style.display === 'block') {
                answer.style.display = 'none';  // Se já estiver visível, oculta
                parentItem.classList.remove('active');
            } else {
                answer.style.display = 'block'; // Caso contrário, exibe
                parentItem.classList.add('active');
            }
        });
    });
}

// Função para desbloqueio de confiança
        async function desbloqueioConfianca() {
            // Coletar dados do localStorage
            const cpfcnpj = localStorage.getItem('cpfSemFormatacao');
            const senha = localStorage.getItem('senha');
            const contrato = localStorage.getItem('contratoId');

            if (!cpfcnpj || !senha || !contrato) {
                alert('Dados necessários não encontrados no localStorage.');
                return;
            }

            // Criar o corpo da requisição
            const data = {
                cpfcnpj: cpfcnpj,
                senha: senha,
                contrato: contrato
            };

            try {
                // Fazer a requisição POST para o proxy
                const response = await fetch('https://feitosa-github-io.vercel.app/api/proxy/desbloqueio', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                // Checar se a resposta foi ok
                if (!response.ok) {
                    throw new Error(`Erro na requisição: ${response.statusText}`);
                }

                // Processar a resposta
                const result = await response.json();
                const mensagem = result.msg || 'Nenhuma mensagem disponível';

                // Exibir a mensagem no modal
                document.getElementById('desbloqueioContent').innerHTML = `
                    <div class="textoModalOutros">
                        <h3>Desbloqueio de Confiança</h3>
                        <p>${mensagem}.</p>
                    </div>
                `;
                document.getElementById('myModal').style.display = 'block';
            } catch (error) {
                console.error('Erro ao realizar desbloqueio de confiança:', error);
                document.getElementById('desbloqueioContent').innerHTML = `<p>Erro: ${error.message}</p>`;
                document.getElementById('myModal').style.display = 'block';
            }
        }

        // Adicionar o listener para o botão
        document.querySelector('button[data-page="desbloqueioConfianca"]').addEventListener('click', desbloqueioConfianca);

    // Função para carregar contrato
    async function carregarContrato() {
        try {
            const response = await fetch('/proxy/contrato', { method: 'GET' });
            const data = await response.json();
            document.getElementById('contratoContent').innerHTML = JSON.stringify(data);
            modal.style.display = 'block';
        } catch (error) {
            console.error('Erro ao carregar contrato:', error);
        }
    }

           // Função para carregar boletos
async function carregarBoleto() {
    try {
        const cpfFormatado = localStorage.getItem('cpfFormatado');
        const contratoId = localStorage.getItem('contratoId');

        if (!cpfFormatado || !contratoId) {
            console.error('CPF ou ID do contrato não encontrado no localStorage.');
            document.getElementById('boletoContent').innerHTML = '<p>CPF ou ID do contrato não encontrado.</p>';
            return;
        }

        const senha = cpfFormatado.replace(/[^\d]/g, '');

        const response = await fetch('https://feitosa-github-io.vercel.app/api/proxy/titulos', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                cpfcnpj: cpfFormatado,
                senha: senha,
                contrato: contratoId
            })
        });

        if (!response.ok) {
            console.error('Resposta da API não foi ok. Status:', response.status);
            throw new Error('Erro na requisição para buscar boletos.');
        }

        const data = await response.json();

        const boletoContent = document.getElementById('boletoContent');

        if (data && Array.isArray(data.faturas) && data.faturas.length > 0) {
            boletoContent.innerHTML = data.faturas.map(boleto => {
                // Formata a data para dia/mês/ano
                const vencimentoFormatado = new Date(boleto.vencimento).toLocaleDateString('pt-BR');

                // Define a classe CSS com base no status do boleto
                let classeStatus = '';
                if (boleto.status === 'Pago') {
                    classeStatus = 'pago';
                } else if (new Date(boleto.vencimento) < new Date()) {
                    classeStatus = 'vencido';
                }

                return `
                    <div class="textoModalBoletos ${classeStatus}">
    <div class="boleto-info">
        <div class="info-col">
            <p><strong>ID:</strong></p>
            <p>${boleto.numero_documento || 'Não disponível'}</p>
        </div>
        <div class="info-col">
            <p><strong>Valor:</strong></p>
            <p>R$ ${boleto.valor.toFixed(2)}</p>
        </div>
        <div class="info-col">
            <p><strong>Vencimento:</strong></p>
            <p>${vencimentoFormatado}</p>
        </div>
    </div>
    <div class="boleto-status">
        <p><strong>Status do pagamento:</strong></p>
        <p style="background-color: #bbb; font-size: 17px; font-weight: bold; padding: 10px; border-radius: 5px;">${boleto.status || 'Não disponível'}</p>
    </div>
    <div class="boleto-pix-linha">
        <div class="boleto-pix">
            <p><strong>Pix Copia e Cola:</strong></p>
            <p>${boleto.codigopix || 'Não disponível'}</p>
        </div><br>
        <div class="boleto-linha">
            <p><strong>Linha Digitável:</strong></p>
            <p>${boleto.linhadigitavel || 'Não disponível'}</p>
        </div>
    </div>
    <p><strong><a href="${boleto.link}.pdf" class="btn-boleto" target="_blank">Baixe o boleto aqui</a></strong></p>
</div>`;
            }).join('');
        } else {
            boletoContent.innerHTML = '<p>Nenhum boleto encontrado.</p>';
        }

        const modal = document.getElementById('myModal');
        modal.style.display = 'block';

    } catch (error) {
        console.error('Erro ao carregar boletos:', error);
        document.getElementById('boletoContent').innerHTML = '<p>Erro ao carregar boletos.</p>';
    }
}
    // Função para reiniciar conexão
    async function reiniciarConexao() {
        try {
            const response = await fetch('/proxy/reiniciar', { method: 'POST' });
            const data = await response.json();
            document.getElementById('reiniciarContent').innerHTML = JSON.stringify(data);
            modal.style.display = 'block';
        } catch (error) {
            console.error('Erro ao reiniciar conexão:', error);
        }
    }

// Função para extrato de conexão
async function extratoConexao() {
    // Coletar dados do localStorage
    const cpfcnpj = localStorage.getItem('cpfSemFormatacao');
    const senha = localStorage.getItem('senha');
    const contrato = localStorage.getItem('contratoId');

    // Função para obter o ano e o mês anteriores
    function getLastThreeMonths() {
        const currentDate = new Date();
        const months = [];
        for (let i = 0; i < 3; i++) {
            const date = new Date(currentDate.getFullYear(), currentDate.getMonth() - i, 1);
            months.push({
                ano: date.getFullYear(),
                mes: date.getMonth() + 1 // Mês começa do 0
            });
        }
        return months;
    }

    // Obter os últimos três meses
    const lastThreeMonths = getLastThreeMonths();
    const results = [];

    try {
        // Buscar os dados para os últimos três meses
        for (const { ano, mes } of lastThreeMonths) {
            const data = {
                cpfcnpj: cpfcnpj,
                senha: senha,
                contrato: contrato,
                ano: ano,
                mes: mes
            };

            // Fazer a requisição POST para o proxy
            const response = await fetch('https://feitosa-github-io.vercel.app/api/proxy/extrato', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });

            // Checar se a resposta foi ok
            if (!response.ok) {
                throw new Error(`Erro na requisição para ${mes}/${ano}: ${response.statusText}`);
            }

            // Processar a resposta
            const result = await response.json();
            results.push({
                ano,
                mes,
                list: result.list,
                total: result.total
            });
        }

        // Consolidar e exibir os resultados
        const extratoContent = document.getElementById('extratoContent');
        extratoContent.innerHTML = results.map(result => `
            <div class="textoModalOutros">
                <h3>Extrato para ${result.mes}/${result.ano}</h3>
                <div class="consumo-total">
                    <p><strong style="color: #10107A;">Consumo total:</strong><br><br>
                    <span class="info-value">${result.total.toFixed(2)}</span></p>
                </div>
                <div class="detalhes-consumo">
                    <strong style="color: #10107A;">Detalhes de consumo:</strong>
                    <ul>
                        ${result.list.length > 0 ? result.list.map(item => `
                            <li class="item-consumo">${JSON.stringify(item)}</li>
                        `).join('') : '<li>Nenhum item disponível</li>'}
                    </ul>
                </div>
                <hr>
            </div>
        <br>`).join('');
        document.getElementById('myModal').style.display = 'block';
    } catch (error) {
        console.error('Erro ao carregar extrato de conexão:', error);
    }
}

// Função para buscar chamados
async function buscarChamado() {
    try {
        console.log("Fazendo requisição para o servidor proxy...");

        // Recupera os dados do localStorage
        const cpfcnpj = localStorage.getItem('cpfFormatado');
        const senha = localStorage.getItem('senha');
        const contrato = localStorage.getItem('contratoId');

        if (!cpfcnpj || !senha || !contrato) {
            console.error('Dados necessários não encontrados no localStorage');
            return;
        }

        // Configura a requisição para o endpoint do proxy
        const response = await fetch('https://feitosa-github-io.vercel.app/api/proxy/buscar-chamado', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                cpfFormatado: cpfcnpj,
                cpfSemFormatacao: senha,
                contratoid: contrato
            })
        });

        if (!response.ok) {
            throw new Error(`Erro na requisição: ${response.statusText}`);
        }

        const data = await response.json();
        console.log(data);

        // Manipula e exibe os dados no modal
        exibirChamadosNoModal(data);
    } catch (error) {
        console.error("Erro ao buscar chamado:", error.message);
    }
}

function exibirChamadosNoModal(data) {
    const ossContent = document.getElementById('ossContent');

    if (ossContent) {
        if (data && data.length > 0) {
            // Limita o número de registros a 5
            const resultadosLimitados = data.slice(0, 5);

            // Gera o HTML para os registros limitados
            ossContent.innerHTML = '<ul>' + resultadosLimitados.map(chamado => {
                return `<li class="textoModalOutros">
                    <h4><center>
                        <p>
                            <span>Protocolo:</span> ${chamado.oc_protocolo}
                            <span style="margin-left: 40px;">Tipo:</span>
                            <h2 style="display: inline;">${chamado.oc_tipo_descricao}</h2>
                        </p>
                        <h5 style="background: #009245; padding:10px; max-width: 150px; border-radius: 8px;">Status: ${chamado.oc_status_descricao}</h5>
                        <p>Detalhes:</p><p>${chamado.oc_conteudo}</p>
                        <p>Serviço realizado:</p><p>${chamado.os_servicoprestado}</p>
                    </center></h4>
                </li><br>`;
            }).join('') + '</ul>';
        } else {
            // Mensagem quando não há chamados para exibir
            ossContent.innerHTML = `
                <div class="textoModalOutros">
                <h4><center>
                    <p>No momento, não há chamados para você.</p>
                    <p>Se você precisa de ajuda, abra um novo chamado ou fale com a gente através do Whatsapp.</p>
                </center></h4>
            </div>
            `;
        }
    } else {
        console.error('Elemento com id "ossContent" não encontrado.');
    }

    // Exibe o modal
    const modal = document.getElementById('myModal');
    if (modal) {
        modal.style.display = 'block'; // Mostra o modal
    } else {
        console.error('Elemento com id "myModal" não encontrado.');
    }
}

// Adicionar o listener para o botão
document.getElementById('extratoConexao').addEventListener('click', extratoConexao);

    // Adicionar o listener para fechar o modal
    document.querySelector('.close').addEventListener('click', () => {
        document.getElementById('myModal').style.display = 'none';
    });

    // Fechar o modal ao clicar fora da área do modal
    window.onclick = function(event) {
        if (event.target == document.getElementById('myModal')) {
            document.getElementById('myModal').style.display = 'none';
        }
    };

    // Função para abrir chamado / criar chamado
async function criarOss() {
    try {
        console.log("Exibindo o formulário de OSS...");

        // Obtenha as informações necessárias do localStorage
        const cpfcnpj = localStorage.getItem('cpfFormatado');
        const senha = localStorage.getItem('senha');
        const contrato = localStorage.getItem('contratoId');

        // Verifique se os dados foram encontrados
        console.log('cpfcnpj:', cpfcnpj);
        console.log('senha:', senha);
        console.log('contrato:', contrato);

        if (!cpfcnpj || !senha || !contrato) {
            console.error('Informações necessárias não encontradas no localStorage');
            return;
        }

        const criarOssContent = document.getElementById('criarOssContent');

        const formHtml = `
        <form id="ossForm">
            <div style="display: none;">
                <input type="hidden" id="cpfcnpj" name="cpfcnpj" value="${cpfcnpj}" />
                <input type="hidden" id="senha" name="senha" value="${senha}" />
                <input type="hidden" id="contrato" name="contrato" value="${contrato}" />
                <input type="hidden" id="motivoos" name="motivoos" value="40" />
                <input type="hidden" id="sem_os" name="sem_os" value="1" />
                <input type="hidden" id="ocorrenciatipo" name="ocorrenciatipo" value="1" />
                <input type="hidden" id="setor" name="setor" value="1" />
                <input type="hidden" id="os_tecnico_responsavel" name="os_tecnico_responsavel" value="1" />
                <input type="hidden" id="os_servico_prestado" name="os_servico_prestado" value="Serviço prestado" />
                <input type="hidden" id="os_prioridade" name="os_prioridade" value="1" />
            </div>

            <div>
                <label for="contato">Contato:</label>
                <input type="text" id="contato" name="contato" />
            </div>

            <div>
                <label for="contato_numero">Número de Contato:</label>
                <input type="text" id="contato_numero" name="contato_numero" />
            </div>

            <div>
                <label for="conteudo">Como podemos te ajudar?</label>
                <textarea id="conteudo" name="conteudo" required></textarea>
            </div>

            <button type="submit">Abrir novo chamado</button>
        </form>
        `;

        criarOssContent.innerHTML = formHtml;
        document.getElementById('myModal').style.display = 'block';

        document.getElementById('ossForm').addEventListener('submit', async function(event) {
            event.preventDefault();

            console.log("Fazendo requisição para o servidor...");

            const formData = new FormData(event.target);

            try {
                const response = await axios.post('https://feitosa-github-io.vercel.app/api/proxy/abrir-chamado', formData, {
                    headers: {
                        'Content-Type': 'multipart/form-data'
                    }
                });

                console.log("Resposta do servidor:", response.data);

                let resultHtml = '';
                if (response.data.status === 0) {
                    // Formatar e exibir as informações do cliente
                    const cliente = response.data;
                    resultHtml = `
                    <div class="textoModalOutros">
                        <div class="cliente-info">
                            <p class="info-item">
                                <strong style="color: #10107A;">Nome do Cliente:</strong><br>
                                <span class="info-value">${cliente.razaosocial}</span>
                            </p>
                            <p class="info-item">
                                <strong style="color: #10107A;">Protocolo:</strong><br>
                                <span class="info-value">${cliente.protocolo}</span>
                            </p>
                            <p class="info-item">
                                <strong style="color: #10107A;">CPF/CNPJ:</strong><br>
                                <span class="info-value">${cliente.cpfcnpj}</span>
                            </p>
                            <p class="info-item">
                                <strong style="color: #10107A;">Contrato:</strong><br>
                                <span class="info-value">${cliente.contrato}</span>
                            </p>
                            <p class="info-item">
                                <strong style="color: #10107A;">Ocorrência ID:</strong><br>
                                <span class="info-value">${cliente.ocorrencia_id}</span>
                            </p>
                        </div>
                    </div>
                    `;
                } else {
                    resultHtml = `<p>${response.data.msg || 'Erro desconhecido'}</p>`;
                }

                criarOssContent.innerHTML = resultHtml;
            } catch (error) {
                console.error("Erro ao fazer a requisição:", error.message);
                criarOssContent.innerHTML = `<p>${error.message}</p>`;
            }
        });

    } catch (error) {
        console.error("", error.message);
    }
}

});
    </script>
    <div class="up-button">
        <a href="https://wa.me/5583999999999">
        <img src="/assets/atm_ico_.png" alt="Volte ao topo">
    </a>
        </div>
</body>
</html>